openapi: 3.0.3
info:
  title: Star API
  description: API Reference for student's knowledge base
  license:
    name: MIT
    url: 'https://mit-license.org/'
  contact:
    name: Daniil
    url: 'https://t.me/dadyarri'
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
components:
  schemas: {}
  securitySchemes:
    Authorization:
      name: Authorization
      type: apiKey
      in: header
  requestBodies:
    CreatePageBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              attachments:
                type: array
                items:
                  $ref: ../models/Attachment.yaml
              link:
                type: string
                pattern: '^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)$'
    EventBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              eventText:
                type: string
              eventDescription:
                type: string
              eventDate:
                type: integer
              eventPriority:
                $ref: ../models/EventPriority.yaml
            required:
              - eventText
              - eventDescription
              - eventDate
              - eventPriority
      description: Body for POST request to create new event
    QuizBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              quizName:
                type: string
              quizDescription:
                type: string
              subject:
                $ref: ../models/Subject.yaml
            required:
              - quizName
              - subject
    CreateAttachmentBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              type:
                $ref: ../models/AttachmentType.yaml
              link:
                type: string
    CreateEmployeeBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              firstName:
                type: string
              lastName:
                type: string
              patronym:
                type: string
              position:
                type: string
              phone:
                type: string
              email:
                type: string
              link:
                type: string
            required:
              - firstName
              - lastName
              - position
      description: ''
    QuestionBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              questionText:
                type: string
              questionDescription:
                type: string
              quiz:
                $ref: ../models/Quiz.yaml
    DeleteContentBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              deletedId:
                type: string
tags:
  - name: content
    description: 'Methodical materials, links, etc'
  - name: persons
    description: 'Authorization information, useful contacts, etc'
  - name: events
    description: Notification system
  - name: tests
    description: Knowledge checking system
paths:
  /inviteCode:
    post:
      summary: Generate invite code
      tags:
        - persons
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/InviteCode.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-inviteCode
      description: Generates new invite code and returns it
      parameters: []
  '/events/{group}':
    get:
      summary: Get events
      tags:
        - events
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Event.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-event
      description: Get events of group by its ID
      parameters: []
    post:
      summary: Create event
      tags:
        - events
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/Event.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-event
      description: create event
      requestBody:
        $ref: '#/components/requestBodies/EventBody'
    parameters:
      - schema:
          type: string
        name: group
        in: path
        required: true
        description: ID of group
  '/pages/{subject}':
    post:
      summary: Create new page
      tags:
        - content
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/Page.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-pages
      description: Create new pages and return it
      parameters: []
      requestBody:
        $ref: '#/components/requestBodies/CreatePageBody'
    get:
      summary: Get pages by subject
      tags:
        - content
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Page.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-pages
      description: Get list of pages in subject by its ID
      parameters: []
    parameters:
      - schema:
          type: string
        name: subject
        in: path
        required: true
        description: ID of subject
  /eventPriorities:
    get:
      summary: get list of priorities
      tags:
        - events
      description: gets list of available priorities
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/EventPriority.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-eventPriorities
      parameters: []
  '/event/{id}':
    get:
      summary: Get event by its id
      description: Gets exact event by its id
      tags:
        - events
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Event.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get
      parameters: []
    delete:
      summary: Delete event by its id
      description: Deletes exact event by its id
      tags:
        - events
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: delete-event
      parameters: []
    patch:
      summary: Update event by its id
      description: Updates exact event by its id
      tags:
        - events
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Event.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: patch-event
      parameters: []
      requestBody:
        $ref: '#/components/requestBodies/EventBody'
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: uuid of event
  '/quizzes/{groupId}':
    get:
      summary: Get list of quizzes
      description: Gets list of created quizzes in exact group
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Quiz.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-quizzes
      parameters: []
    post:
      summary: Create new quiz
      description: Creates new quiz for the exact group
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Quiz.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-quizzes
      parameters: []
      requestBody:
        $ref: '#/components/requestBodies/QuizBody'
    parameters:
      - schema:
          type: string
        name: groupId
        in: path
        required: true
        description: ID of group
  '/softwares/{subjectId}':
    post:
      summary: Create new software link in a subject by its ID
      tags:
        - content
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Software.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-software
      description: Create new software link in a subject by its ID
      security:
        - Authorization: []
      parameters: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                link:
                  type: string
              required:
                - link
    parameters:
      - schema:
          type: string
        name: subjectId
        in: path
        required: true
        description: ID of subject
    get:
      summary: Get list of created softwares in the subject
      operationId: get-softwares
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Software.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      description: Gets list of created softwares in the exact subject by its ID
      tags:
        - content
  '/attachments/{subjectId}':
    post:
      summary: Create new attachment in the subject
      tags:
        - content
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Attachment.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-new-attachment
      parameters: []
      description: 'Create new attachment in the exact subject by its ID '
    parameters:
      - schema:
          type: string
        name: subjectId
        in: path
        required: true
        description: ID of subject
    get:
      summary: Get all attachments in subject
      operationId: get-attachments
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Attachment.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      description: Get all attachments in subject by its ID
      tags:
        - content
      requestBody:
        $ref: '#/components/requestBodies/CreateAttachmentBody'
  '/employees/{specialtyId}':
    post:
      summary: Create new employee
      tags:
        - content
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Employee.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-new-employee
      description: Creates new employee
      parameters: []
      requestBody:
        $ref: '#/components/requestBodies/CreateEmployeeBody'
    parameters:
      - schema:
          type: string
        name: specialtyId
        in: path
        required: true
        description: ID of specialty
    get:
      summary: Get all employees in a specialty
      operationId: get-employees
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Employee.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      description: Get all employees in a specialty
      tags:
        - content
  '/quiz/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: id of quiz
    get:
      summary: Get exact quiz
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Quiz.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-quiz-id
      description: Get exact quiz
    delete:
      summary: Delete quiz
      tags:
        - tests
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: delete-quiz-id
      description: Delete quiz
    patch:
      summary: Update quiz
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Quiz.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: patch-quiz-id
      description: Update quiz
      requestBody:
        $ref: '#/components/requestBodies/QuizBody'
  '/quiz/{id}/questions':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: Quiz ID
    get:
      summary: Get a list of questions in the quiz
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: ../models/Question.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-quiz-id-questions
      description: ' Get a list of questions in the quiz '
    post:
      summary: Create new question
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Question.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-quiz-id-questions
      description: Create new question
      requestBody:
        $ref: '#/components/requestBodies/QuestionBody'
  '/question/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: id of question
    patch:
      summary: Change question
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Question.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: patch-quiz-quiz_id-question-question_id
      description: Change question
      requestBody:
        $ref: '#/components/requestBodies/QuestionBody'
    delete:
      summary: Delete question
      tags:
        - tests
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: delete-quiz-quiz_id-question-question_id
      description: Delete question
    get:
      summary: Get exact question
      tags:
        - tests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: ../models/Question.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-quiz-quiz_id-question-question_id
      description: Get exact question
  '/trash/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: id of deleted content
    get:
      summary: Get information about deleted content
      tags:
        - content
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  deletedContent:
                    anyOf:
                      - $ref: ../models/Attachment.yaml
                      - $ref: ../models/Page.yaml
                      - $ref: ../models/Software.yaml
                      - $ref: ../models/Quiz.yaml
                      - $ref: ../models/Question.yaml
                      - $ref: ../models/QuizVariant.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: get-trash-id
      description: Get information about deleted content
    delete:
      summary: Restore content from trash
      tags:
        - content
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: delete-trash-id
      description: Restore content from trash
  /trash:
    post:
      summary: Delete element to trash
      tags:
        - content
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: ../models/Trash.yaml
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: post-trash
      description: Deletes element to trash
      requestBody:
        $ref: '#/components/requestBodies/DeleteContentBody'
  /whoami:
    get:
      summary: Gets username of current user
      tags:
        - persons
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  username:
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ''
      operationId: get-whoami
      description: Gets username of current user
  '/inviteCode/{id}':
    parameters:
      - schema:
          type: string
        name: id
        in: path
        required: true
        description: ID of invite code
    delete:
      summary: Invalidate an invite code
      tags:
        - persons
      responses:
        '200':
          description: OK
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: ../models/Error.yaml
      operationId: delete-inviteCode-id
      description: Invalidates invite code by its ID
security:
  - Authorization: []
